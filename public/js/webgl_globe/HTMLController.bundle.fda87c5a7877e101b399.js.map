{"version":3,"sources":["webpack:///./node_modules/@polygonjs/polygonjs/src/core/Transform.ts","webpack:///./src/controllers/FeaturesController.ts","webpack:///./src/controllers/SilosController.ts","webpack:///./src/controllers/HTMLController.ts"],"names":["TransformTargetType","TRANSFORM_TARGET_TYPES","GEOMETRIES","OBJECTS","RotationOrder","ROTATION_ORDERS","XYZ","XZY","YXZ","YZX","ZXY","ZYX","CoreTransform","_translation_matrix","_translation_matrix_q","_translation_matrix_s","_matrix","identity","_matrix_q","_matrix_euler","_matrix_s","_rotate_geometry_m","_rotate_geometry_q","_rotate_geometry_vec_dest","matrix","node","options","update_scale","decompose","this","set_params_from_matrix_position","set_params_from_matrix_quaternion","set_params_from_matrix_scale","set_params_from_matrix_euler","setFromQuaternion","toVector3","set_params_from_matrix_rotation","divideScalar","Math","PI","toArray","set_params_from_matrix_t","set_params_from_matrix_r","set_params_from_matrix_s","scene","batchUpdates","params","set_vector3","set_float","object","position","set_params_from_object_position_array","rotation","set_params_from_object_rotation_array","set_params_from_object_rotation_deg","fromArray","multiplyScalar","t","compose","r","s","scale","rotation_order","set","degToRad","x","y","z","setFromEuler","copy","geometry","vec_origin","vec_dest","normalize","setFromUnitVectors","makeRotationFromQuaternion","applyMatrix4","quaternion","FeaturesController","queryString","window","location","search","URLSearchParams","get","small","app","document","getElementById","ID_APP","classList","add","SKIP_INTRO","ARCS_ANIM","MATRIX_AUTO_UPDATE","GSAP_DEBUG","SiloRole","SiloRoleName","SILO_ROLE_NAMES","STRATEGY","DESIGN","DEVELOPMENT","MARKETING","PRODUCTION","TECHNOLOGY","SiloLocation","SILOS_BY_NAME","Map","NEW_YORK","role","tag","rx","ry","LONDON","BERLIN","KIEV","BOSTON","TEL_AVIV","BANGALORE","BANGKOK","SYDNEY","SEATTLE","SAN_JOSE","MEDELLIN","BUENOS_AIRES","CAPE_TOWN","silos","locations","_core_transform","T","Vector3","S","silo","push","map","_silo_data","start_pos","main_controller","app_element","console","warn","globe_profiles_element","ID_PROFILES","mock_html","_create_profile_templates","elements_parent","children","silos_controller","i","length","css_object_element","selector","profile_wrapper","querySelector","profile_element","css_object_element_child","innerHTML","appendChild","cloneNode","container","forEach","template","_profile_template","append","attribs","wrapper","createElement","dataset","main_element","thumbnail","setAttribute","body","title_and_name","title","name","role_s","toString","toLowerCase","innerText"],"mappings":"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","file":"HTMLController.bundle.fda87c5a7877e101b399.js","sourcesContent":["import {Number3} from '../types/GlobalTypes';\nimport {Vector3} from 'three/src/math/Vector3';\nimport {Quaternion} from 'three/src/math/Quaternion';\nimport {Object3D} from 'three/src/core/Object3D';\nimport {Matrix4} from 'three/src/math/Matrix4';\nimport {Euler} from 'three/src/math/Euler';\nimport {BufferGeometry} from 'three/src/core/BufferGeometry';\nimport {MathUtils} from 'three/src/math/MathUtils';\n\nimport {BaseNodeType} from '../engine/nodes/_Base';\n\nexport enum TransformTargetType {\n\tOBJECTS = 'objects',\n\tGEOMETRIES = 'geometries',\n}\nexport const TRANSFORM_TARGET_TYPES: Array<TransformTargetType> = [\n\tTransformTargetType.GEOMETRIES,\n\tTransformTargetType.OBJECTS,\n];\n\nexport enum RotationOrder {\n\tXYZ = 'XYZ',\n\tXZY = 'XZY',\n\tYXZ = 'YXZ',\n\tYZX = 'YZX',\n\tZYX = 'ZYX',\n\tZXY = 'ZXY',\n}\nexport const ROTATION_ORDERS: RotationOrder[] = [\n\tRotationOrder.XYZ,\n\tRotationOrder.XZY,\n\tRotationOrder.YXZ,\n\tRotationOrder.YZX,\n\tRotationOrder.ZXY,\n\tRotationOrder.ZYX,\n];\nexport const DEFAULT_ROTATION_ORDER = RotationOrder.XYZ;\n\nexport interface SetParamsFromMatrixOptions {\n\tscale?: boolean;\n}\n\nexport class CoreTransform {\n\tprivate static set_params_from_matrix_position = new Vector3();\n\tprivate static set_params_from_matrix_quaternion = new Quaternion();\n\tprivate static set_params_from_matrix_scale = new Vector3();\n\tprivate static set_params_from_matrix_euler = new Euler();\n\tprivate static set_params_from_matrix_rotation = new Vector3();\n\tprivate static set_params_from_matrix_t: Number3 = [0, 0, 0];\n\tprivate static set_params_from_matrix_r: Number3 = [0, 0, 0];\n\tprivate static set_params_from_matrix_s: Number3 = [0, 0, 0];\n\tstatic set_params_from_matrix(matrix: Matrix4, node: BaseNodeType, options: SetParamsFromMatrixOptions = {}) {\n\t\tlet update_scale = options['scale'];\n\t\tif (update_scale == null) {\n\t\t\tupdate_scale = true;\n\t\t}\n\n\t\tmatrix.decompose(\n\t\t\tthis.set_params_from_matrix_position,\n\t\t\tthis.set_params_from_matrix_quaternion,\n\t\t\tthis.set_params_from_matrix_scale\n\t\t);\n\n\t\tthis.set_params_from_matrix_euler.setFromQuaternion(this.set_params_from_matrix_quaternion);\n\t\tthis.set_params_from_matrix_euler.toVector3(this.set_params_from_matrix_rotation);\n\t\tthis.set_params_from_matrix_rotation.divideScalar(Math.PI / 180);\n\n\t\tthis.set_params_from_matrix_position.toArray(this.set_params_from_matrix_t);\n\t\tthis.set_params_from_matrix_rotation.toArray(this.set_params_from_matrix_r);\n\t\tthis.set_params_from_matrix_scale.toArray(this.set_params_from_matrix_s);\n\n\t\tnode.scene().batchUpdates(() => {\n\t\t\tnode.params.set_vector3('t', this.set_params_from_matrix_t);\n\t\t\tnode.params.set_vector3('r', this.set_params_from_matrix_r);\n\t\t\tnode.params.set_vector3('s', this.set_params_from_matrix_s);\n\t\t\tif (update_scale) {\n\t\t\t\tnode.params.set_float('scale', 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic set_params_from_object_position_array: Number3 = [0, 0, 0];\n\tstatic set_params_from_object_rotation_deg = new Vector3();\n\tstatic set_params_from_object_rotation_array: Number3 = [0, 0, 0];\n\tstatic set_params_from_object(object: Object3D, node: BaseNodeType) {\n\t\tobject.position.toArray(this.set_params_from_object_position_array);\n\n\t\tobject.rotation.toArray(this.set_params_from_object_rotation_array);\n\t\tthis.set_params_from_object_rotation_deg.fromArray(this.set_params_from_object_rotation_array);\n\t\tthis.set_params_from_object_rotation_deg.multiplyScalar(180 / Math.PI);\n\t\tthis.set_params_from_object_rotation_deg.toArray(this.set_params_from_object_rotation_array);\n\n\t\tnode.scene().batchUpdates(() => {\n\t\t\tnode.params.set_vector3('t', this.set_params_from_object_position_array);\n\t\t\tnode.params.set_vector3('r', this.set_params_from_object_rotation_array);\n\t\t});\n\t}\n\n\tprivate _translation_matrix: Matrix4 = new Matrix4();\n\tprivate _translation_matrix_q = new Quaternion();\n\tprivate _translation_matrix_s = new Vector3(1, 1, 1);\n\ttranslation_matrix(t: Vector3): Matrix4 {\n\t\tthis._translation_matrix.compose(t, this._translation_matrix_q, this._translation_matrix_s);\n\t\treturn this._translation_matrix;\n\t}\n\n\tprivate _matrix = new Matrix4().identity();\n\tprivate _matrix_q = new Quaternion();\n\tprivate _matrix_euler = new Euler();\n\tprivate _matrix_s = new Vector3();\n\tmatrix(t: Vector3, r: Vector3, s: Vector3, scale: number, rotation_order: RotationOrder) {\n\t\tthis._matrix_euler.set(\n\t\t\tMathUtils.degToRad(r.x),\n\t\t\tMathUtils.degToRad(r.y),\n\t\t\tMathUtils.degToRad(r.z),\n\t\t\trotation_order\n\t\t);\n\t\tthis._matrix_q.setFromEuler(this._matrix_euler);\n\n\t\tthis._matrix_s.copy(s).multiplyScalar(scale);\n\n\t\tthis._matrix.compose(t, this._matrix_q, this._matrix_s);\n\t\treturn this._matrix;\n\t}\n\n\tprivate _rotate_geometry_m = new Matrix4();\n\tprivate _rotate_geometry_q = new Quaternion();\n\tprivate _rotate_geometry_vec_dest = new Vector3();\n\trotate_geometry(geometry: BufferGeometry, vec_origin: Vector3, vec_dest: Vector3) {\n\t\tthis._rotate_geometry_vec_dest.copy(vec_dest);\n\t\tthis._rotate_geometry_vec_dest.normalize();\n\t\tthis._rotate_geometry_q.setFromUnitVectors(vec_origin, this._rotate_geometry_vec_dest);\n\t\t// this._rotate_geometry_m.identity(); // not entirely sure this is necessary\n\t\tthis._rotate_geometry_m.makeRotationFromQuaternion(this._rotate_geometry_q);\n\t\tgeometry.applyMatrix4(this._rotate_geometry_m);\n\t}\n\n\tstatic decompose_matrix(object: Object3D) {\n\t\tobject.matrix.decompose(object.position, object.quaternion, object.scale);\n\t}\n}\n","import {HTMLController} from './HTMLController';\n\nexport class FeaturesController {\n\tstatic SKIP_INTRO: Readonly<boolean> = false;\n\tstatic ARCS_ANIM: Readonly<boolean> = true;\n\tstatic MATRIX_AUTO_UPDATE: Readonly<boolean> = true;\n\tstatic GSAP_DEBUG: Readonly<boolean> = true;\n\n\tstatic not_transparent() {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\treturn urlParams.get('transparent') == '0';\n\t}\n\n\tstatic small() {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\treturn urlParams.get('small') == '1';\n\t}\n\tstatic mock_html() {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\treturn urlParams.get('mock_html') == '1';\n\t}\n\tstatic init() {\n\t\tif (this.small()) {\n\t\t\tconst app = document.getElementById(HTMLController.ID_APP);\n\t\t\tif (app) {\n\t\t\t\tapp.classList.add('small');\n\t\t\t}\n\t\t}\n\t}\n}\n","import {CoreTransform, RotationOrder} from '@polygonjs/polygonjs/src/core/Transform';\nimport {Vector3} from 'three/src/math/Vector3';\n\nexport enum SiloRole {\n\tSTRATEGY = 0,\n\tDESIGN = 1,\n\tDEVELOPMENT = 2,\n\tMARKETING = 3,\n\tPRODUCTION = 4,\n\tTECHNOLOGY = 5,\n}\nexport enum SiloRoleName {\n\tSTRATEGY = 'Strategy',\n\tDESIGN = 'Design',\n\tDEVELOPMENT = 'Development',\n\tMARKETING = 'Marketing',\n\tPRODUCTION = 'Production',\n\tTECHNOLOGY = 'Technology',\n}\nexport const SILO_ROLE_NAMES: SiloRoleName[] = [\n\tSiloRoleName.STRATEGY,\n\tSiloRoleName.DESIGN,\n\tSiloRoleName.DEVELOPMENT,\n\tSiloRoleName.MARKETING,\n\tSiloRoleName.PRODUCTION,\n\tSiloRoleName.TECHNOLOGY,\n];\nexport enum SiloLocation {\n\tNEW_YORK = 'new_york',\n\tLONDON = 'london',\n\tBERLIN = 'berlin',\n\tKIEV = 'kiev',\n\tBOSTON = 'boston',\n\tTEL_AVIV = 'tel_aviv',\n\tBANGALORE = 'bangalore',\n\tBANGKOK = 'bangkok',\n\tSYDNEY = 'sydney',\n\tSEATTLE = 'seattle',\n\tSAN_JOSE = 'san_jose',\n\tMEDELLIN = 'medellin',\n\tBUENOS_AIRES = 'buenos_aires',\n\tCAPE_TOWN = 'cape_town',\n}\n\ninterface Silo {\n\trole: SiloRole;\n\ttag: string;\n\trx: number;\n\try: number;\n}\n\nexport const SILOS_BY_NAME: Map<SiloLocation, Silo> = new Map();\nSILOS_BY_NAME.set(SiloLocation.NEW_YORK, {\n\trole: SiloRole.STRATEGY,\n\ttag: 'Digital Strategist',\n\trx: -13,\n\try: -5.1,\n});\nSILOS_BY_NAME.set(SiloLocation.LONDON, {\n\trole: SiloRole.DESIGN,\n\ttag: 'UI/UX Designer',\n\trx: -24,\n\try: 67.2,\n});\nSILOS_BY_NAME.set(SiloLocation.BERLIN, {\n\trole: SiloRole.TECHNOLOGY,\n\ttag: 'DevOps Engineer',\n\trx: -25.22,\n\try: 80.7,\n});\nSILOS_BY_NAME.set(SiloLocation.KIEV, {\n\trole: SiloRole.DEVELOPMENT,\n\ttag: 'Front-End Developer',\n\trx: 203,\n\try: -82,\n});\nSILOS_BY_NAME.set(SiloLocation.BOSTON, {\n\trole: SiloRole.MARKETING,\n\ttag: 'Digital Marketer',\n\trx: -17,\n\try: 0.7,\n});\nSILOS_BY_NAME.set(SiloLocation.TEL_AVIV, {\n\trole: SiloRole.TECHNOLOGY,\n\ttag: 'Blockchain Architect',\n\trx: -4.9,\n\try: 101.9,\n});\nSILOS_BY_NAME.set(SiloLocation.BANGALORE, {\n\trole: SiloRole.DEVELOPMENT,\n\ttag: 'iOS Developer',\n\trx: 7,\n\try: -219.2,\n});\nSILOS_BY_NAME.set(SiloLocation.BANGKOK, {\n\trole: SiloRole.PRODUCTION,\n\ttag: '3D Animator',\n\trx: 8.5,\n\try: -197,\n});\nSILOS_BY_NAME.set(SiloLocation.SYDNEY, {\n\trole: SiloRole.TECHNOLOGY,\n\ttag: 'SEO Specialist',\n\trx: 46.2,\n\try: 212,\n});\nSILOS_BY_NAME.set(SiloLocation.SEATTLE, {\n\trole: SiloRole.MARKETING,\n\ttag: 'Product Manager',\n\trx: -21.6,\n\try: 310,\n});\nSILOS_BY_NAME.set(SiloLocation.SAN_JOSE, {\n\trole: SiloRole.STRATEGY,\n\ttag: 'Creative Director',\n\trx: -5.8,\n\try: -41.1,\n});\nSILOS_BY_NAME.set(SiloLocation.MEDELLIN, {\n\trole: SiloRole.DEVELOPMENT,\n\ttag: 'Full-Stack Developer',\n\trx: 17.3,\n\try: -3.6,\n});\nSILOS_BY_NAME.set(SiloLocation.BUENOS_AIRES, {\n\trole: SiloRole.PRODUCTION,\n\ttag: 'Character Artist',\n\trx: 50,\n\try: 13.2,\n});\nSILOS_BY_NAME.set(SiloLocation.CAPE_TOWN, {\n\trole: SiloRole.MARKETING,\n\ttag: 'Copywriter',\n\trx: 46.1,\n\try: 445,\n});\nexport class SilosController {\n\tpublic readonly silos: Silo[] = [];\n\tpublic readonly locations: SiloLocation[] = [\n\t\tSiloLocation.NEW_YORK,\n\t\tSiloLocation.LONDON,\n\t\tSiloLocation.CAPE_TOWN,\n\t\tSiloLocation.BANGALORE,\n\t\tSiloLocation.SYDNEY,\n\t\tSiloLocation.SEATTLE,\n\t\tSiloLocation.BUENOS_AIRES,\n\t\tSiloLocation.BERLIN,\n\t\tSiloLocation.BANGKOK,\n\t\tSiloLocation.SAN_JOSE,\n\t\tSiloLocation.MEDELLIN,\n\t\tSiloLocation.BOSTON,\n\t\tSiloLocation.TEL_AVIV,\n\t\tSiloLocation.KIEV,\n\t];\n\tconstructor() {\n\t\t// const location_pairs: [SiloLocation, SiloLocation][] = [\n\t\t// \t[SiloLocation.NEW_YORK, SiloLocation.LONDON],\n\t\t// \t[SiloLocation.TEL_AVIV, SiloLocation.BANGALORE],\n\t\t// \t[SiloLocation.SYDNEY, SiloLocation.MEDELLIN],\n\t\t// \t[SiloLocation.BOSTON, SiloLocation.BERLIN],\n\t\t// \t[SiloLocation.CAPE_TOWN, SiloLocation.SAN_JOSE],\n\t\t// \t[SiloLocation.NEW_YORK, SiloLocation.SYDNEY],\n\t\t// \t[SiloLocation.BANGKOK, SiloLocation.KIEV],\n\t\t// \t[SiloLocation.LONDON, SiloLocation.SAN_JOSE],\n\t\t// \t[SiloLocation.BUENOS_AIRES, SiloLocation.SEATTLE],\n\t\t// ];\n\t\t// for (let location_pair of location_pairs) {\n\t\t// \tthis.locations.push(location_pair[0]);\n\t\t// \tthis.locations.push(location_pair[1]);\n\t\t// \tconst silo_start = SILOS_BY_NAME.get(location_pair[0]);\n\t\t// \tconst silo_end = SILOS_BY_NAME.get(location_pair[1]);\n\t\t// \tif (silo_start && silo_end) {\n\t\t// \t\tthis.silos.push(silo_start);\n\t\t// \t\tthis.silos.push(silo_end);\n\t\t// \t}\n\t\t//}\n\n\t\tfor (let location of this.locations) {\n\t\t\tconst silo = SILOS_BY_NAME.get(location);\n\t\t\tif (silo) {\n\t\t\t\tthis.silos.push(silo);\n\t\t\t}\n\t\t}\n\t}\n\n\tdata() {\n\t\treturn this.silos.map((silo) => {\n\t\t\treturn this._silo_data(silo);\n\t\t});\n\t}\n\n\tprivate _core_transform = new CoreTransform();\n\tprivate T = new Vector3(0, 0, 0);\n\tprivate S = new Vector3(1, 1, 1);\n\tprivate _silo_data(silo: Silo) {\n\t\tconst start_pos = new Vector3(0, 0, 1);\n\n\t\tstart_pos.applyMatrix4(this._matrix(silo.rx, 0));\n\t\tstart_pos.applyMatrix4(this._matrix(0, silo.ry));\n\n\t\treturn {\n\t\t\trole: silo.role,\n\t\t\tposition: start_pos.toArray(),\n\t\t};\n\t}\n\tprivate _matrix(rx: number, ry: number) {\n\t\treturn this._core_transform.matrix(this.T, new Vector3(rx, ry, 0), this.S, 1, RotationOrder.XYZ);\n\t}\n}\n","import {MainController} from '../MainController';\nimport {FeaturesController} from './FeaturesController';\nimport {SiloRole, SiloLocation, SILO_ROLE_NAMES, SILOS_BY_NAME, SilosController} from './SilosController';\n\ninterface TemplateAttributes {\n\trole: SiloRole;\n\tlocation: SiloLocation;\n}\n\nexport class HTMLController {\n\tstatic readonly ID_APP = 'webgl-globe-app';\n\tstatic readonly ID_PROFILES = 'webgl-globe-profiles';\n\n\tconstructor(protected main_controller: MainController) {}\n\tmove_profiles_to_css_objects() {\n\t\tconst app_element = document.getElementById(HTMLController.ID_APP);\n\t\tif (!app_element) {\n\t\t\tconsole.warn(`no element with id ${HTMLController.ID_APP}`);\n\t\t\treturn;\n\t\t}\n\t\tconst globe_profiles_element = document.getElementById(HTMLController.ID_PROFILES);\n\t\tif (!globe_profiles_element) {\n\t\t\tconsole.warn(`no element with id ${HTMLController.ID_PROFILES}`);\n\t\t\treturn;\n\t\t}\n\n\t\tif (FeaturesController.mock_html()) {\n\t\t\tthis._create_profile_templates(globe_profiles_element);\n\t\t}\n\n\t\tconst elements_parent = app_element.children[0];\n\t\tconst silos_controller = new SilosController();\n\t\tconst silos = silos_controller.silos;\n\t\tconst locations = silos_controller.locations;\n\t\tfor (let i = 0; i < silos.length; i++) {\n\t\t\tconst location = locations[i];\n\t\t\tconst css_object_element = elements_parent.children[i];\n\t\t\tif (css_object_element) {\n\t\t\t\tconst selector = `[data-location=${location}]`;\n\t\t\t\tconst profile_wrapper = globe_profiles_element.querySelector(selector);\n\t\t\t\tif (profile_wrapper) {\n\t\t\t\t\tconst profile_element = profile_wrapper.children[0];\n\t\t\t\t\tconst css_object_element_child = css_object_element.children[0];\n\t\t\t\t\tcss_object_element_child.innerHTML = '';\n\t\t\t\t\tcss_object_element_child.appendChild(profile_element.cloneNode(true));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('webgl-globe, missing html element', i);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _create_profile_templates(container: HTMLElement) {\n\t\tSILOS_BY_NAME.forEach((silo, location) => {\n\t\t\tconst template = this._profile_template({role: silo.role, location: location});\n\t\t\tcontainer.append(template);\n\t\t});\n\t}\n\n\tprivate _profile_template(attribs: TemplateAttributes) {\n\t\tconst wrapper = document.createElement('div');\n\t\twrapper.classList.add('wrapper');\n\t\twrapper.dataset['location'] = attribs.location;\n\n\t\tconst main_element = document.createElement('div');\n\t\tmain_element.classList.add('globe-profile');\n\t\t// image\n\t\tconst thumbnail = document.createElement('img');\n\t\tthumbnail.classList.add('globe-profile-thumbnail');\n\t\tthumbnail.setAttribute('src', '/media/img/profiles/profile_test.01.128.jpg');\n\t\tmain_element.append(thumbnail);\n\t\t// body\n\t\tconst body = document.createElement('div');\n\t\tbody.classList.add('globe-profile-body');\n\t\tconst title_and_name = document.createElement('div');\n\t\ttitle_and_name.classList.add('globe-profile-title-and-name');\n\t\tconst title = document.createElement('div');\n\t\ttitle.classList.add('globe-profile-title');\n\t\tconst name = document.createElement('div');\n\t\tname.classList.add('globe-profile-name');\n\t\tconst tag = document.createElement('span');\n\t\ttag.classList.add('globe-profile-tag');\n\t\tconst role_s = SILO_ROLE_NAMES[attribs.role];\n\t\ttag.classList.add(`${role_s.toString().toLowerCase()}`);\n\t\ttag.innerText = role_s.toString().toLowerCase();\n\n\t\ttitle_and_name.append(title);\n\t\ttitle_and_name.append(name);\n\t\tbody.append(title_and_name);\n\t\tbody.append(tag);\n\t\tmain_element.append(body);\n\t\twrapper.append(main_element);\n\t\treturn wrapper;\n\t}\n}\n"],"sourceRoot":""}
